<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Memory Card Game - [MSSV c·ªßa b·∫°n]</title>
    <style>
      :root {
        --primary: #2563eb;
        --bg: #f8fafc;
        --card-front: #1e293b;
        --card-back: #ffffff;
      }

      body {
        font-family: "Segoe UI", sans-serif;
        background: var(--bg);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        margin: 0;
      }

      .stats {
        margin-bottom: 20px;
        font-size: 1.2rem;
        font-weight: bold;
      }

      .game-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        perspective: 1000px;
        max-width: 600px;
        width: 100%;
      }

      @media (min-width: 600px) {
        .game-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }

      /* CSS 3D Flip Animation */
      .card {
        height: 150px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .card:hover {
        transform: scale(1.02);
      }

      .card.flipped {
        transform: rotateY(180deg);
      }

      .card.matched {
        cursor: default;
        opacity: 0.8;
      }

      .card-face {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .card-front {
        background-color: var(--card-front);
        color: white;
      }

      .card-back {
        background-color: var(--card-back);
        transform: rotateY(180deg);
        border: 2px solid var(--primary);
      }

      button {
        margin-top: 30px;
        padding: 10px 25px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
      }

      button:hover {
        opacity: 0.9;
      }
    </style>
  </head>
  <body>
    <h1>Memory Card Game</h1>
    <div class="stats">L∆∞·ª£t click: <span id="moves">0</span></div>

    <main class="game-grid" id="gameGrid"></main>

    <button onclick="resetGame()">Ch∆°i l·∫°i</button>

    <script>
      const gridElement = document.getElementById("gameGrid");
      const movesElement = document.getElementById("moves");

      const icons = ["üçé", "üçå", "üçá", "üçí", "üçé", "üçå", "üçá", "üçí"];
      let flippedCards = [];
      let matchedPairs = 0;
      let moves = 0;
      let isProcessing = false;

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function createBoard() {
        gridElement.innerHTML = "";
        const shuffledIcons = shuffle([...icons]);

        shuffledIcons.forEach((icon, index) => {
          const card = document.createElement("div");
          card.className = "card";
          card.dataset.icon = icon;
          card.innerHTML = `
                    <div class="card-face card-front">?</div>
                    <div class="card-face card-back">${icon}</div>
                `;
          card.addEventListener("click", () => flipCard(card));
          gridElement.appendChild(card);
        });
      }

      function flipCard(card) {
        if (isProcessing || card.classList.contains("flipped") || card.classList.contains("matched")) return;

        card.classList.add("flipped");
        flippedCards.push(card);

        if (flippedCards.length === 2) {
          moves++;
          movesElement.textContent = moves;
          checkMatch();
        }
      }

      function checkMatch() {
        isProcessing = true;
        const [card1, card2] = flippedCards;

        if (card1.dataset.icon === card2.dataset.icon) {
          // Kh·ªõp r·ªìi!
          card1.classList.add("matched");
          card2.classList.add("matched");
          matchedPairs++;
          flippedCards = [];
          isProcessing = false;

          if (matchedPairs === icons.length / 2) {
            setTimeout(() => alert(`Ch√∫c m·ª´ng! B·∫°n ƒë√£ th·∫Øng sau ${moves} l∆∞·ª£t click!`), 500);
          }
        } else {
          setTimeout(() => {
            card1.classList.remove("flipped");
            card2.classList.remove("flipped");
            flippedCards = [];
            isProcessing = false;
          }, 1000);
        }
      }

      function resetGame() {
        moves = 0;
        matchedPairs = 0;
        flippedCards = [];
        movesElement.textContent = moves;
        createBoard();
      }

      createBoard();
    </script>
  </body>
</html>
